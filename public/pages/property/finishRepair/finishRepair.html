<div>
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox">
                <div class="ibox-title">
                    <h5>报修结单</h5>
                </div>
                <div class="ibox-content">
                    <div>
                        <div>
                            <div class="form-group row" v-if="finishRepairInfo.repairObjType != '004'">
                                <label class="col-sm-2 col-form-label">是否用料</label>
                                <div class="col-sm-10">
                                    <select class="custom-select" v-model="finishRepairInfo.maintenanceType">
                                        <option selected value="">请选择是否用料</option>
                                        <option v-for="(item,index) in finishRepairInfo.maintenanceTypes" :key="index"
                                                :value="item.statusCd"
                                                v-if="item.statusCd != '1001' && item.statusCd != '1002'">
                                            {{item.name}}
                                        </option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group row" v-if="finishRepairInfo.repairObjType == '004'">
                                <label class="col-sm-2 col-form-label">维修类型</label>
                                <div class="col-sm-10">
                                    <select class="custom-select" v-model="finishRepairInfo.maintenanceType">
                                        <option selected value="">请选择维修类型</option>
                                        <option v-for="(item,index) in finishRepairInfo.maintenanceTypes" :key="index"
                                                :value="item.statusCd"
                                                v-if="item.statusCd != '1003' && item.statusCd != '1004'">
                                            {{item.name}}
                                        </option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group row"
                                 v-if="finishRepairInfo.maintenanceType == '1001' || finishRepairInfo.maintenanceType == '1003'">
                                <label class="col-sm-2 col-form-label">&nbsp;</label>
                                <div class="col-sm-10">
                                    <button class="btn btn-primary" type="button"
                                            v-on:click="_openChooseSingleResourceModel()">
                                        <i class="fa fa-plus"></i>&nbsp;选择商品
                                    </button>
                                </div>
                            </div>
                            <div v-if="(finishRepairInfo.maintenanceType == '1001' || finishRepairInfo.maintenanceType == '1003') && finishRepairInfo.choosedGoodsList.length > 0">
                                <div class="form-group row">
                                    <label class="col-sm-2 col-form-label">使用商品</label>
                                    <div class="col-sm-10">
                                        <div class="row">
                                            <div class="col-sm-2">分类</div>
                                            <div class="col-sm-3">商品</div>
                                            <div class="col-sm-3" v-show="finishRepairInfo.maintenanceType == '1001'">
                                                价格
                                            </div>
                                            <div class="col-sm-2">数量</div>
                                            <div class="col-sm-2">操作</div>
                                        </div>
                                        <div class="row" style="margin-bottom: 10px;" v-for="(item,index) in finishRepairInfo.choosedGoodsList">
                                            <div class="col-sm-2">
                                                <input cols="15" class="form-control" disabled="disabled"
                                                       v-model="item.rstName">
                                            </div>
                                            <div class="col-sm-3" v-if="item.isCustom">
                                                <input cols="15" class="form-control" disabled="disabled"
                                                       v-model="item.customGoodsName">
                                            </div>
                                            <div class="col-sm-3" v-else>
                                                <input cols="15" class="form-control" disabled="disabled"
                                                       v-model="item.resName">
                                            </div>
                                            <div class="col-sm-3" v-show="finishRepairInfo.maintenanceType == '1001'">
                                                <input cols="15" class="form-control" :disabled="!item.isCustom && item.outHighPrice == item.outLowPrice"
                                                       v-model="item.price" v-on:input="_updateTotalPrice()">
                                                <span v-show="!item.isCustom && item.outHighPrice != item.outLowPrice">价格范围({{item.outLowPrice}} - {{item.outHighPrice}})</span>
                                            </div>
                                            <div class="col-sm-2">
                                                <div class="input-group">
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-primary" type="button" v-on:click="_useNumberDec(index)">-</button>
                                                    </span>
                                                    <input cols="15" class="form-control" v-model="item.useNumber" v-on:input="_updateTotalPrice()">
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-primary" type="button" v-on:click="_useNumberInc(index)">+</button>
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="col-sm-2">
                                                <button class="btn btn-danger" type="button"
                                                        v-on:click="_removeChoosedGoodsItem(index)">
                                                    <i class="fa fa-times"></i>&nbsp;移除
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group row" v-if="finishRepairInfo.maintenanceType == '1001'">
                                <label class="col-sm-2 col-form-label">商品总金额</label>
                                <div class="col-sm-10">
                                    <input cols="15" class="form-control" disabled="disabled"
                                           v-model="finishRepairInfo.totalPrice">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-sm-2 col-form-label">处理意见</label>
                                <div class="col-sm-10">
                                    <textarea placeholder="必填，请填写处理意见" cols="15" class="form-control"
                                              v-model="finishRepairInfo.context">
                                    </textarea>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-sm-2 col-form-label">维修前图片</label>
                                <div class="content-img col-sm-10">
                                    <vc:create path="frame/uploadImage" callBackListener="finishRepairInfo" callBackFunction="notifyUploadBeforeReapirImage"
                                        namespace="finishRepair1">
                                    </vc:create>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-sm-2 col-form-label">维修后图片</label>
                                <div class="content-img col-sm-10">
                                    <vc:create path="frame/uploadImage" callBackListener="finishRepairInfo" callBackFunction="notifyUploadAfterReapirImage"
                                        namespace="finishRepair2">
                                    </vc:create>
                                </div>
                            </div>
                            <div class="ibox-content">
                                <button class="btn btn-primary float-right" type="button"
                                        v-on:click="_finishRepairInfo()">
                                    <i class="fa fa-check"></i>&nbsp;提交
                                </button>
                                <button type="button" class="btn btn-warning float-right" style="margin-right:20px;"
                                        v-on:click="_back()">
                                    <i class="fa fa-close"></i>&nbsp;返回
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <vc:create path="common/chooseSingleResource" emitChooseSingleResource="finishRepairInfo"
               emitLoadData="finishRepairInfo">
    </vc:create>
</div>